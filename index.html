<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Midhuuuu ğŸ’•</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:#000;
  overflow:hidden;
}

/* COMMON */
.center{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
}

/* LOGIN â€“ NO BG IMAGE */
#login{
  background:#000;
  color:white;
}

/* CANDLE PAGE */
#candlePage{
  display:none;
  background:
    linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),
    url("bg.jpg") center/cover no-repeat;
  color:#ffd1dc;
}

/* DARK SCREEN */
#darkScreen{
  display:none;
  background:#000;
  color:white;
  font-size:24px;
}

/* BIRTHDAY PAGE */
#birthday{
  display:none;
  background:
    linear-gradient(rgba(0,0,0,.65),rgba(0,0,0,.65)),
    url("bg.jpg") center/cover no-repeat;
  color:white;
  overflow-y:auto;
}

/* INPUTS */
input{
  width:220px;
  padding:12px;
  margin:6px;
  border-radius:25px;
  border:none;
  text-align:center;
}

/* BUTTON */
button{
  padding:12px 30px;
  border:none;
  border-radius:30px;
  background:#ff4b5c;
  color:white;
  cursor:pointer;
  margin-top:12px;
}

/* CANDLES */
#candles{
  font-size:70px;
  margin-bottom:20px;
}
#micStatus{
  font-size:14px;
  margin-top:10px;
}

/* CARD */
.card{
  background:rgba(255,255,255,.97);
  max-width:420px;
  padding:20px;
  border-radius:20px;
  color:#333;
}

.card img{
  width:100%;
  height:220px;
  object-fit:cover;
  border-radius:15px;
  transition:opacity 1s;
}

/* SIGNATURE */
.signature{
  margin-top:15px;
  font-size:15px;
  color:#d81b60;
  font-weight:600;
}

/* EMOJIS */
.emoji{
  position:fixed;
  bottom:-20px;
  animation:floatUp linear infinite;
}
@keyframes floatUp{
  to{transform:translateY(-110vh);opacity:0}
}
</style>
</head>

<body>

<audio id="music" loop>
  <source src="music.mp3">
</audio>

<!-- LOGIN -->
<div id="login" class="center">
  <h2>ğŸ” Enter to see your surprise ğŸ’</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <div style="font-size:13px;opacity:.8;">Hint: Itâ€™s your nickname ğŸ˜‰</div>
  <button onclick="doLogin()">Continue ğŸ’–</button>
  <div id="error"></div>
</div>

<!-- CANDLE PAGE -->
<div id="candlePage" class="center">
  <div id="candles">ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸</div>
  <button onclick="startMic()">Blow the candles ğŸ¤</button>
  <div id="micStatus">Tap and blow gently ğŸ’¨</div>
</div>

<!-- DARK SCREEN -->
<div id="darkScreen" class="center">
  Make a wishâ€¦ âœ¨
</div>

<!-- BIRTHDAY PAGE -->
<div id="birthday" class="center">
  <div class="card">
    <h2>ğŸ‰ Happy Birthday Midhuuuu ğŸ’•</h2>
    <img id="slide" src="img1.jpg">
    <p id="text"></p>
    <div class="signature">â€” With love, Ashoooo ğŸ«¶ğŸ»</div>
  </div>
</div>

<script>
"use strict";

/* ELEMENTS */
const loginDiv = document.getElementById("login");
const candleDiv = document.getElementById("candlePage");
const darkDiv = document.getElementById("darkScreen");
const birthdayDiv = document.getElementById("birthday");
const errorDiv = document.getElementById("error");
const candlesEl = document.getElementById("candles");
const micStatusEl = document.getElementById("micStatus");
const slide = document.getElementById("slide");
const textEl = document.getElementById("text");
const music = document.getElementById("music");

/* LOGIN */
const USERNAME="midhuuuu";
const PASSWORD="forever";

function doLogin(){
  const u=document.getElementById("username").value.trim();
  const p=document.getElementById("password").value.trim();
  if(u===USERNAME && p===PASSWORD){
    loginDiv.style.display="none";
    candleDiv.style.display="flex";
  } else errorDiv.innerText="Try again ğŸ˜‰";
}

/* MIC + CANDLE */
let audioContext, analyser, mic, candleBlown=false;

function startMic(){
  navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
    audioContext=new AudioContext();
    analyser=audioContext.createAnalyser();
    mic=audioContext.createMediaStreamSource(stream);
    mic.connect(analyser);
    analyser.fftSize=256;
    micStatusEl.innerText="Blow now ğŸ’¨";
    detectBlow();
  });
}

function detectBlow(){
  const data=new Uint8Array(analyser.frequencyBinCount);
  function check(){
    if(candleBlown) return;
    analyser.getByteFrequencyData(data);
    let volume=data.reduce((a,b)=>a+b)/data.length;
    if(volume>35){
      candleBlown=true;
      candlesEl.innerText="ğŸ’¨";
      setTimeout(showDark,800);
      return;
    }
    requestAnimationFrame(check);
  }
  check();
}

/* DARK â†’ BIRTHDAY */
function showDark(){
  candleDiv.style.display="none";
  darkDiv.style.display="flex";
  setTimeout(()=>{
    darkDiv.style.display="none";
    showBirthday();
  },3000);
}

/* BIRTHDAY */
const imgs=["img1.jpg","img2.jpg","img3.jpg"];
let i=0;

function showBirthday(){
  birthdayDiv.style.display="flex";
  music.play();
  startSlideshow();
  startTyping();
  startEmojiRain();
}

function startSlideshow(){
  setInterval(()=>{
    slide.style.opacity=0;
    setTimeout(()=>{
      i=(i+1)%imgs.length;
      slide.src=imgs[i];
      slide.style.opacity=1;
    },800);
  },4000);
}

/* TYPING â€“ YOUR CONTENT */
const msg=`Thanks for coming into my life.
ni enaku one of the biggest supporter ğŸ’•
best, sweet and cute friend forever ğŸ«¶ğŸ»

Midhuuuu you are my safe place and my comfort zone lusu ğŸ’–
and my forever person â¤ï¸
eppovum ena vitu poidatha pleasee ğŸ¥ºğŸ¥º

Iâ€™m so grateful for you.
Hey my sugar plum ğŸ¥°â¤ï¸
intha careless boy cares you lot and loves you lotttt ğŸ’ğŸ’
Love you midhuuuu â¤ï¸ğŸ«‚`;

let c=0;
function startTyping(){
  textEl.innerHTML="";
  c=0;
  const t=setInterval(()=>{
    textEl.innerHTML+=msg.charAt(c++);
    if(c>=msg.length)clearInterval(t);
  },40);
}

/* EMOJIS */
const emojis=["ğŸ–¤","ğŸ’™","ğŸ’–","ğŸ«"];
function startEmojiRain(){
  setInterval(()=>{
    const e=document.createElement("div");
    e.className="emoji";
    e.innerHTML=emojis[Math.floor(Math.random()*emojis.length)];
    e.style.left=Math.random()*100+"vw";
    e.style.fontSize=(20+Math.random()*20)+"px";
    e.style.animationDuration=(4+Math.random()*4)+"s";
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),8000);
  },300);
}
</script>

</body>
</html>
