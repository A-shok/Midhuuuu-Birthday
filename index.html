<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Midhuuuu ğŸ’•</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:#000;
  overflow:hidden;
}

/* COMMON CENTER */
.center{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
}

/* LOGIN */
#login{
  background:
    linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),
    url("bg.jpg") center/cover no-repeat;
  color:white;
}
input{
  width:220px;
  padding:12px;
  margin:6px;
  border-radius:25px;
  border:none;
  text-align:center;
}
button{
  padding:12px 30px;
  border:none;
  border-radius:30px;
  background:#ff4b5c;
  color:white;
  cursor:pointer;
  margin-top:12px;
}

/* CANDLE PAGE */
#candlePage{
  display:none;
  background:#000;
  color:#ffd1dc;
}
#candles{
  font-size:70px;
  margin-bottom:20px;
}
#micStatus{
  font-size:14px;
  margin-top:10px;
}

/* DARK SCREEN */
#darkScreen{
  display:none;
  background:#000;
  color:white;
  font-size:24px;
}

/* BIRTHDAY PAGE */
#birthday{
  display:none;
  background:
    linear-gradient(rgba(0,0,0,.65),rgba(0,0,0,.65)),
    url("bg.jpg") center/cover no-repeat;
  color:white;
  overflow-y:auto;
}

.card{
  background:rgba(255,255,255,.97);
  max-width:420px;
  padding:20px;
  border-radius:20px;
  color:#333;
}

.card img{
  width:100%;
  height:220px;
  object-fit:cover;
  border-radius:15px;
  transition:opacity 1s;
}

/* EMOJIS */
.emoji{
  position:fixed;
  bottom:-20px;
  animation:floatUp linear infinite;
}
@keyframes floatUp{
  to{transform:translateY(-110vh);opacity:0}
}
</style>
</head>

<body>

<audio id="music" loop>
  <source src="music.mp3">
</audio>

<!-- LOGIN -->
<div id="login" class="center">
  <h2>ğŸ” Enter to see your surprise ğŸ’</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <div style="font-size:13px;opacity:.8;">Hint: Itâ€™s your nickname ğŸ˜‰</div>
  <button onclick="doLogin()">Continue ğŸ’–</button>
  <div id="error"></div>
</div>

<!-- CANDLE PAGE -->
<div id="candlePage" class="center">
  <div id="candles">ğŸ•¯ï¸ğŸ•¯ï¸ğŸ•¯ï¸</div>
  <button onclick="startMic()">Blow the candles ğŸ¤</button>
  <div id="micStatus">Tap and blow gently ğŸ’¨</div>
</div>

<!-- DARK SCREEN -->
<div id="darkScreen" class="center">
  Make a wishâ€¦ âœ¨
</div>

<!-- BIRTHDAY PAGE -->
<div id="birthday" class="center">
  <div class="card">
    <h2>ğŸ‰ Happy Birthday Midhuuuu ğŸ’•</h2>
    <img id="slide" src="img1.jpg">
    <p id="text"></p>
  </div>
</div>

<script>
/* LOGIN */
const USERNAME="midhuuuu";
const PASSWORD="forever";

function doLogin(){
  if(username.value===USERNAME && password.value===PASSWORD){
    login.style.display="none";
    candlePage.style.display="flex";
  } else error.innerText="Try again ğŸ˜‰";
}

/* MIC + CANDLE LOGIC */
let audioContext, analyser, mic;
let candleBlown = false; // ğŸ”’ LOCK FLAG

function startMic(){
  navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
    audioContext = new AudioContext();
    analyser = audioContext.createAnalyser();
    mic = audioContext.createMediaStreamSource(stream);
    mic.connect(analyser);
    analyser.fftSize = 256;
    micStatus.innerText = "Blow now ğŸ’¨";
    detectBlow();
  }).catch(()=>{
    micStatus.innerText = "Please allow microphone ğŸ¤";
  });
}

function detectBlow(){
  const data = new Uint8Array(analyser.frequencyBinCount);

  function check(){
    if(candleBlown) return; // ğŸš« stop once blown

    analyser.getByteFrequencyData(data);
    let volume = data.reduce((a,b)=>a+b)/data.length;

    if(volume > 60){
      candleBlown = true;        // ğŸ”“ UNLOCK
      candles.innerText = "ğŸ’¨";
      micStatus.innerText = "Candles blown âœ¨";
      setTimeout(showDarkScreen, 800);
      return;
    }
    requestAnimationFrame(check);
  }
  check();
}

/* DARK â†’ BIRTHDAY */
function showDarkScreen(){
  candlePage.style.display="none";
  darkScreen.style.display="flex";

  setTimeout(()=>{
    darkScreen.style.display="none";
    showBirthday();
  },3000);
}

/* BIRTHDAY (SLIDESHOW STARTS ONLY HERE) */
function showBirthday(){
  birthday.style.display="flex";
  music.play();            // ğŸ”“ music unlocked
  startSlideshow();        // ğŸ”“ slideshow unlocked
  startTyping();
  startEmojiRain();
}

/* SLIDESHOW */
const imgs=["img1.jpg","img2.jpg","img3.jpg"];
let i=0;
function startSlideshow(){
  setInterval(()=>{
    slide.style.opacity=0;
    setTimeout(()=>{
      i=(i+1)%imgs.length;
      slide.src=imgs[i];
      slide.style.opacity=1;
    },800);
  },4000);
}

/* TYPING */
const msg=`Thanks for coming into my life .
ni enaku one of the biggest supporter ğŸ’•
best, sweet and cute friend forever ğŸ«¶ğŸ»
Thanks for being with meâ£ï¸

Midhuuuu you are my safe place and my comfort zone lusu ğŸ’–
and my forever person â¤ï¸ 
eppovum ena vitu poidatha pleasee ğŸ¥ºğŸ¥º

Iâ€™m so grateful for you.
Hey my sugar plum ğŸ¥°â¤ï¸
intha careless boy cares you lot and loves you lotttt ğŸ’ğŸ’
Love you midhuuuu â¤ï¸ğŸ«‚`;
let c=0;
function startTyping(){
  text.innerHTML="";
  c=0;
  const t=setInterval(()=>{
    text.innerHTML+=msg.charAt(c++);
    if(c>=msg.length)clearInterval(t);
  },40);
}

/* EMOJI RAIN */
const emojis=["ğŸ–¤","ğŸ’™","ğŸ’–","ğŸ«"];
function startEmojiRain(){
  setInterval(()=>{
    const e=document.createElement("div");
    e.className="emoji";
    e.innerHTML=emojis[Math.floor(Math.random()*emojis.length)];
    e.style.left=Math.random()*100+"vw";
    e.style.fontSize=(20+Math.random()*20)+"px";
    e.style.animationDuration=(4+Math.random()*4)+"s";
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),8000);
  },300);
}
   <div id="promise">
      ğŸ’ I promise to stand by you always, <br>
      protect your smile, <br>
      and never leave your side ğŸ’– <br><br>
      No matter what life brings, <br>
      you are never alone ğŸ¤
    </div>
</script>

</body>
</html>
