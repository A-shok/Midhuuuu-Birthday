<script>
"use strict";

/* GET ELEMENTS (SAFE FOR MOBILE) */
const loginDiv = document.getElementById("login");
const candleDiv = document.getElementById("candlePage");
const darkDiv = document.getElementById("darkScreen");
const wishDiv = document.getElementById("wishPage");
const birthdayDiv = document.getElementById("birthday");
const secretDiv = document.getElementById("secretPage");

const usernameInput = document.getElementById("username");
const passwordInput = document.getElementById("password");
const errorDiv = document.getElementById("error");

const candlesEl = document.getElementById("candles");
const slide = document.getElementById("slide");
const textEl = document.getElementById("text");
const secretBtn = document.getElementById("secretBtn");
const secretText = document.getElementById("secretText");

const music = document.getElementById("music");

const loginBtn = document.getElementById("loginBtn");
const blowBtn = document.getElementById("blowBtn");
const loveBtn = document.getElementById("loveBtn");

/* LOGIN CREDENTIALS */
const USERNAME = "midhuuuu";
const PASSWORD = "forever";

/* LOGIN ACTION */
loginBtn.addEventListener("click", () => {
  if (
    usernameInput.value.trim() === USERNAME &&
    passwordInput.value.trim() === PASSWORD
  ) {
    loginDiv.style.display = "none";
    candleDiv.style.display = "flex";
  } else {
    errorDiv.innerText = "Try again ðŸ˜‰";
  }
});

/* CANDLE EFFECT (NO EMOJI) */
blowBtn.addEventListener("click", () => {
  blowBtn.disabled = true;

  // white glow phase
  candleDiv.style.background = "#fff";
  candlesEl.style.color = "#ff9a00";

  // keep candle on for 3 sec
  setTimeout(() => {
    candleDiv.style.display = "none";
    darkDiv.style.display = "flex";

    // dark screen for 3 sec
    setTimeout(() => {
      darkDiv.style.display = "none";
      wishDiv.style.display = "flex";
    }, 3000);

  }, 3000);
});

/* WISH â†’ SLIDESHOW */
loveBtn.addEventListener("click", () => {
  wishDiv.style.display = "none";
  birthdayDiv.style.display = "flex";
  fadeInMusic();
  startSlideshow();
  startTyping();
});

/* MUSIC FADE IN */
music.volume = 0;
function fadeInMusic() {
  music.play();
  let v = 0;
  const fade = setInterval(() => {
    v += 0.05;
    music.volume = Math.min(v, 1);
    if (v >= 1) clearInterval(fade);
  }, 200);
}

/* SLIDESHOW */
const images = ["img1.jpg", "img2.jpg", "img3.jpg"];
let imgIndex = 0;

function startSlideshow() {
  setInterval(() => {
    slide.style.opacity = 0;
    setTimeout(() => {
      imgIndex = (imgIndex + 1) % images.length;
      slide.src = images[imgIndex];
      slide.style.opacity = 1;
    }, 800);
  }, 4000);
}

/* TYPING TEXT */
const message = `Thanks for coming into my life .
ni enaku one of the biggest supporter ðŸ’•
best, sweet and cute friend forever ðŸ«¶ðŸ»
Thanks for being with meâ£ï¸

Midhuuuu you are my safe place and my comfort zone lusu ðŸ’–
and my forever person â¤ï¸ 
eppovum ena vitu poidatha pleasee ðŸ¥ºðŸ¥º

Iâ€™m so grateful for you.
Hey my sugar plum ðŸ¥°â¤ï¸
intha careless boy cares you lot and loves you lotttt ðŸ’žðŸ’
Love you midhuuuu â¤ï¸ðŸ«‚`;

function startTyping() {
  textEl.innerHTML = "";
  let i = 0;
  const typing = setInterval(() => {
    textEl.innerHTML += message.charAt(i++);
    if (i >= message.length) {
      clearInterval(typing);
      secretBtn.style.display = "inline-block";
    }
  }, 40);
}

/* SECRET MESSAGE */
secretBtn.addEventListener("click", () => {
  birthdayDiv.style.display = "none";
  secretDiv.style.display = "flex";

  secretText.innerText =
`Midhuuuuu,

I promise you now.
Don't worry about everything.
I am always there for you.

You are never alone.

Ashooo iruken, irupen epovum ðŸ’–`;
});
</script>
