<script>
document.addEventListener("DOMContentLoaded", function () {

  /* ELEMENTS */
  const loginDiv = document.getElementById("login");
  const candleDiv = document.getElementById("candlePage");
  const darkDiv = document.getElementById("darkScreen");
  const wishDiv = document.getElementById("wishPage");
  const birthdayDiv = document.getElementById("birthday");
  const secretDiv = document.getElementById("secretPage");

  const usernameInput = document.getElementById("username");
  const passwordInput = document.getElementById("password");
  const errorDiv = document.getElementById("error");

  const candlesEl = document.getElementById("candles");
  const slide = document.getElementById("slide");
  const textEl = document.getElementById("text");
  const secretBtn = document.getElementById("secretBtn");
  const secretText = document.getElementById("secretText");

  const loginBtn = document.getElementById("loginBtn");
  const blowBtn = document.getElementById("blowBtn");
  const loveBtn = document.getElementById("loveBtn");
  const music = document.getElementById("music");

  /* SAFETY CHECK */
  if (!loginBtn || !blowBtn || !loveBtn) {
    alert("HTML IDs missing. Please re-check button IDs.");
    return;
  }

  /* LOGIN */
  const USERNAME = "midhuuuu";
  const PASSWORD = "forever";

  loginBtn.addEventListener("click", () => {
    if (
      usernameInput.value.trim() === USERNAME &&
      passwordInput.value.trim() === PASSWORD
    ) {
      loginDiv.style.display = "none";
      candleDiv.style.display = "flex";
    } else {
      errorDiv.innerText = "Try again ðŸ˜‰";
    }
  });

  /* CANDLE */
  blowBtn.addEventListener("click", () => {
    blowBtn.disabled = true;
    candleDiv.style.background = "#fff";
    candlesEl.style.color = "#ff9a00";

    setTimeout(() => {
      candleDiv.style.display = "none";
      darkDiv.style.display = "flex";

      setTimeout(() => {
        darkDiv.style.display = "none";
        wishDiv.style.display = "flex";
      }, 3000);

    }, 3000);
  });

  /* WISH â†’ SLIDESHOW */
  loveBtn.addEventListener("click", () => {
    wishDiv.style.display = "none";
    birthdayDiv.style.display = "flex";
    fadeInMusic();
    startTyping();
    startSlideshow();
  });

  /* MUSIC */
  function fadeInMusic() {
    music.volume = 0;
    music.play();
    let v = 0;
    const fade = setInterval(() => {
      v += 0.05;
      music.volume = Math.min(v, 1);
      if (v >= 1) clearInterval(fade);
    }, 200);
  }

  /* SLIDESHOW */
  const images = ["img1.jpg", "img2.jpg", "img3.jpg"];
  let index = 0;
  function startSlideshow() {
    setInterval(() => {
      slide.style.opacity = 0;
      setTimeout(() => {
        index = (index + 1) % images.length;
        slide.src = images[index];
        slide.style.opacity = 1;
      }, 800);
    }, 4000);
  }

  /* TYPING */
  const message = `Thanks for coming into my life .
ni enaku one of the biggest supporter ðŸ’•
best, sweet and cute friend forever ðŸ«¶ðŸ»
Thanks for being with meâ£ï¸

Midhuuuu you are my safe place and my comfort zone lusu ðŸ’–
and my forever person â¤ï¸ 
eppovum ena vitu poidatha pleasee ðŸ¥ºðŸ¥º

Iâ€™m so grateful for you.
Hey my sugar plum ðŸ¥°â¤ï¸
intha careless boy cares you lot and loves you lotttt ðŸ’žðŸ’
Love you midhuuuu â¤ï¸ðŸ«‚`;

  function startTyping() {
    textEl.innerHTML = "";
    let i = 0;
    const typing = setInterval(() => {
      textEl.innerHTML += message.charAt(i++);
      if (i >= message.length) {
        clearInterval(typing);
        secretBtn.style.display = "inline-block";
      }
    }, 40);
  }

  /* SECRET */
  secretBtn.addEventListener("click", () => {
    birthdayDiv.style.display = "none";
    secretDiv.style.display = "flex";

    secretText.innerText =
`Midhuuuuu,

I promise you now.
Don't worry about everything.
I am always there for you.

You are never alone.

Ashooo iruken, irupen epovum ðŸ’–`;
  });

});
</script>
